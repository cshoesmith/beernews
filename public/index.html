<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sydney Beer Weekly</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400&family=Source+Sans+Pro:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Top Navigation -->
    <nav class="top-nav">
        <div class="nav-container">
            <div class="nav-left">
                <button class="menu-btn" aria-label="Menu">
                    <span></span><span></span><span></span>
                </button>
            </div>
            <!-- <div class="nav-right">Removed Subscribe</div> -->
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Navigation Overlay -->
        <div class="mag-nav-overlay">
            <button id="nav-prev" class="nav-arrow" aria-label="Previous Page">
                &lt;
            </button>
            <button id="nav-next" class="nav-arrow" aria-label="Next Page">
                &gt;
            </button>
        </div>

        <div id="magazine-container">
            <!-- Page Display -->
            <div id="page-spread">
                <div class="loading-screen" style="padding:40px; text-align:center;">
                    <h2>Sydney Beer Weekly</h2>
                    <p>Loading Issue...</p>
                </div>
            </div>
        </div>

        <!-- Progress Bar -->
        <div class="mag-controls">
            <div class="control-bar">
                <span id="page-number-display">Cover</span>
                <div class="progress-rail">
                    <div id="mag-progress-bar" class="progress-fill"></div>
                </div>
                <span id="total-pages-display">16 Pages</span>
                <span onclick="toggleAdmin()" class="admin-link" style="cursor: pointer; margin-left:15px; font-size: 0.8rem;" title="Admin">Admin</span>
            </div>
        </div>
    </main>

    <!-- Admin Modal -->
    <div id="admin-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:9999; color:white; padding:20px; box-sizing:border-box; overflow-y:auto;">
        <div style="max-width:500px; margin:50px auto; background:#222; padding:30px; border-radius:8px; border:1px solid #444;">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; border-bottom:1px solid #444; padding-bottom:10px;">
                <h2 style="margin:0;">Mag Admin</h2>
                <button onclick="closeAdmin()" style="background:none; border:none; color:#aaa; font-size:24px; cursor:pointer;">&times;</button>
            </div>
            
            <div id="admin-login-step">
                <p>Password Required:</p>
                <input type="password" id="admin-pw" placeholder="Enter password" style="width:100%; padding:10px; margin-bottom:15px; background:#333; border:1px solid #555; color:white; box-sizing:border-box;">
                <button onclick="verifyAdmin()" style="width:100%; padding:10px; background:var(--mag-accent, #ffcc00); border:none; color:black; font-weight:bold; cursor:pointer;">Login</button>
                <p id="login-error" style="color:#ff6b6b; display:none; margin-top:10px;">Incorrect Password</p>
            </div>

            <div id="admin-content-step" style="display:none;">
                <div style="margin-bottom:20px; border-bottom:1px solid #444; padding-bottom:15px;">                      <h3>Actions</h3>
                      <button id="btn-generate-mag" onclick="generateMagazine()" style="width:100%; padding:12px; background:linear-gradient(45deg, #e67e22, #f1c40f); border:none; color:black; font-weight:bold; cursor:pointer; margin-bottom:10px;">
                          GENERATE NEW MAGAZINE
                      </button>
                      <div id="gen-status" style="font-size:0.8rem; color:#aaa; text-align:center;"></div>
                  </div>

                  <div style="margin-bottom:20px; border-bottom:1px solid #444; padding-bottom:15px;">                    <h3>Current Venues</h3>
                    <div id="existing-venues-list" style="max-height:100px; overflow-y:auto; color:#ccc; font-size:0.9em; padding:5px; background:#111; border:1px solid #333;">
                        Loading...
                    </div>
                </div>

                <div style="margin-bottom:20px;">
                    <h3>Add New Venue</h3>
                    <p style="font-size:0.9rem; color:#aaa;">Search for a venue to add to the next magazine edition.</p>
                    <div style="display:flex; gap:10px; margin-top:10px;">
                        <input type="text" id="venue-search" placeholder="Venue Name (e.g. Mountain Culture)" style="flex:1; padding:10px; background:#333; border:1px solid #555; color:white;">
                        <button onclick="searchVenues()" style="padding:10px 20px; background:#444; border:1px solid #555; color:white; cursor:pointer;">Search</button>
                    </div>
                </div>

                <div id="search-results" style="margin-top:20px; max-height:300px; overflow-y:auto;">
                    <!-- Results populate here -->
                </div>
            </div>
        </div>
    </div>

    <script src="app.js?v=4"></script>
</body>
</html>
